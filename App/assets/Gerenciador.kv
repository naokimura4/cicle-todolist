<Gerenciador>:
    Menu:
        name: 'menu'
    InputMateria: 
        name: 'materia'
    TelaHorario:
        name: 'horario'
    Welcome:
        name: 'welcome'
    Ciclo:
        name: 'ciclo'
    TransitionHorario:
        name: 'transicao'

<Welcome>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # [left, top, right, bottom]
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos
        # Image:
        #     source: 'logo.png'
        #     size_hint_y: None
        #     height: 200
        #     allow_stretch: True
        #     keep_ratio: False

        Label:
            text: "Bem-vindo ao Ciclo de Estudos"
            font_size: 50
            color: 1, 1, 1, 1  # Texto branco
            halign: 'center'  # Centraliza horizontalmente
            valign: 'middle'  # Centraliza verticalmente
            size_hint_y: 1
            height: self.texture_size[1] + 20
            text_size: self.width, None  # Permite quebra de linha
        Label:
            text: "Organize seu tempo e estudos de forma eficaz! :)"
            font_size: 20
            color: 0.8, 0.8, 0.8, 1  # Texto cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None
        BoxLayout:
            size_hint_y: None
            height: 80  # Altura fixa para o botão
            padding: [50, 0]  # Deixa o botão mais centralizado horizontalmente
            Button:
                text: "Começar"
                font_size: 25
                background_color: 0.2, 0.6, 0.8, 1  # Azul
                background_normal: ''  # Remove o estilo padrão
                color: 1, 1, 1, 1  # Texto branco
                size_hint: (0.5, 1)  # Botão centralizado e menor
                on_release: app.root.current = 'transicao'
        Label:
            text: 'Toque no botão acima para continuar'
            font_size: 16
            color: 0.7, 0.7, 0.7, 1  # Texto cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None
            
<TransitionHorario>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # [left, top, right, bottom]
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            text: "Um ciclo de estudos organiza seu tempo de forma equilibrada, distribuindo as matérias conforme sua dificuldade e prioridade. Em vez de seguir uma grade fixa, você estuda cada matéria em blocos de tempo ajustáveis, garantindo revisão constante e melhor aproveitamento do aprendizado."
            font_size: 25
            color: 1, 1, 1, 1  # Texto branco
            halign: "center"
            valign: "middle"
            
            size_hint: 1, 0.9  # Define a largura relativa e a altura dinâmica
            text_size: self.width, None  # Permite quebra de linha dentro do Label
            height: self.texture_size[1] + 20  # Ajusta a altura ao conteúdo
        Label: 
            text: 'Antes de começar, defina qual será sua carga horária'
            font_size: 20
            color: 1,1,1,1
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20  # Ajusta a altura com base no texto
            text_size: self.width, None  # Permite quebra de linha
        BoxLayout:
            size_hint_y: None
            height: 80  # Altura fixa para o botão
            padding: [50, 0]  # Deixa o botão mais centralizado horizontalmente
            Button:
                text: 'Definir Carga Horária'
                font_size: 20
                background_color: 0.2, 0.6, 0.8, 1  # Azul
                background_normal: ''  # Remove o estilo padrão
                color: 1, 1, 1, 1  # Texto branco
                size_hint: (0.5, 1)  # Reduz o tamanho horizontal
                on_release: app.root.current = 'horario'
        Label:
            text: 'Toque no botão acima para continuar'
            font_size: 16
            color: 0.7, 0.7, 0.7, 1  # Texto cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None

<Menu>:
    BoxLayout:    
        orientation: 'vertical'
        spacing: 25
        padding: [40, 60, 40, 60]  # [left, top, right, bottom]
        
        canvas.before:
            Color:
                rgba: 0.08, 0.12, 0.2, 1  # Fundo azul escuro suave
            Rectangle:
                size: self.size
                pos: self.pos
        
        Label: 
            text: "Ciclo de Estudos"
            font_size: 50
            color: 1, 1, 1, 1  # Texto branco
            bold: True
            size_hint_y: None
            height: 100
            
        Button:
            text: "Adicionar Matéria"
            font_size: 22
            background_color: 0.2, 0.6, 0.8, 1  # Azul
            background_normal: ''  # Remove imagem padrão
            color: 1, 1, 1, 1  # Texto branco
            size_hint_y: None
            height: 60
            on_release: app.root.current = 'materia'
            
        Button:
            text: "Ajustar Horário"
            font_size: 22
            background_color: 0.2, 0.6, 0.8, 1
            background_normal: ''
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 60
            on_release: app.root.current = 'horario'
            
        Button: 
            text: "Ver Ciclo"
            font_size: 22
            background_color: 0.2, 0.6, 0.8, 1
            background_normal: ''
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 60
            on_release: app.root.current = 'ciclo'
        
        Button:
            text: "Resetar Matérias"
            font_size: 22
            background_color: 1, 0.5, 0, 1  # Laranja para alerta
            background_normal: ''
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 60
            on_release: root.resetar_dados()
        
        Button:
            text: "Sair"
            font_size: 22
            background_color: 0.8, 0.2, 0.2, 1  # Vermelho para indicar saída
            background_normal: ''
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 60
            on_release: app.stop()
            
<InputMateria>:
    nome_materia: nome_input
    spinner_diff: dificuldade_spinner

    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # [left, top, right, bottom]
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos
        Label: 
            text: "Adicionar Matéria"
            font_size: 60
            color: 1, 1, 1, 1  # Texto branco
            bold: True
            size_hint_y: None
            height: 100
        Label:
            text: "Adicione uma matéria e sua dificuldade com base em seus critérios"
            font_size: 20
            color: 0.8, 0.8, 0.8, 1  # Texto cinza claro
        Label:
            text: 'Ex: Matemática - 2 Péssimo'
            font_size: 16
            color: 0.7, 0.7, 0.7, 1  # Texto cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None
        TextInput:
            id: nome_input
            hint_text: "Nome da Matéria"
            size_hint_y: None
            multiline: False
            height: 50
            font_size: 18
            background_color: 1, 1, 1, 1  # Fundo branco para contraste
            foreground_color: 0, 0, 0, 1  # Texto preto

        Spinner:
            id: dificuldade_spinner
            text: "Selecione"
            values: ["1 - Péssimo", "2 - Ruim", "3 - Mediano", "4 - Bom", "5 - Excelente"]
            size_hint_y: None
            height: 50
            font_size: 18
            background_color: 0.2, 0.6, 0.8, 1  # Azul
            color: 1, 1, 1, 1  # Texto branco

        BoxLayout:
            spacing: 10
            size_hint_y: None
            height: 60
            padding: [50, 0]

            Button:
                text: "Salvar"
                font_size: 20
                background_color: 0.2, 0.6, 0.8, 1  # Azul
                background_normal: ''
                color: 1, 1, 1, 1
                size_hint: (0.5, 1)
                on_release: root.salvar_materia()

            Button:
                text: "Cancelar"
                font_size: 20
                background_color: 0.8, 0.2, 0.2, 1  # Vermelho
                background_normal: ''
                color: 1, 1, 1, 1
                size_hint: (0.5, 1)
                on_release: app.root.current = 'menu'
<TelaHorario>:
    dias_input: dias_input
    horas_input: horas_input
    resultado_label: resultado_label

    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # [left, top, right, bottom]
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos

        Label:
            text: "Calculadora de Carga Horária"
            font_size: 40
            bold: True
            color: 1, 1, 1, 1  # Texto branco
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None
        Label:
            text: "Informe o número de dias e horas que você deseja estudar por dia."
            font_size: 18
            italic: True
            color: 0.7, 0.7, 0.7, 1  # Cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 10
            text_size: self.width, None
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint_y: None
            height: 50

            TextInput:
                id: dias_input
                hint_text: "Dias"
                input_filter: "int"
                font_size: 18
                size_hint_x: 0.6
                height: 50
                multiline: False
                background_color: 1, 1, 1, 1  # Fundo branco
                foreground_color: 0, 0, 0, 1  # Texto preto

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint_y: None
            height: 50

            TextInput:
                id: horas_input
                hint_text: "Horas por Dia"
                input_filter: "int"
                multiline: False
                font_size: 18
                size_hint_x: 0.6
                height: 50
                background_color: 1, 1, 1, 1
                foreground_color: 0, 0, 0, 1
        Label:
            text: "ATENÇÃO: A horária máxima para dias é 7 e para horas é 24 para garantir um ciclo saudável"
            font_size: 18
            italic: True
            color: 0.7, 0.7, 0.7, 1  # Cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 10
            text_size: self.width, None

        BoxLayout:
            size_hint_y: None
            height: 80
            padding: [50, 0]

            Button:
                text: "Calcular Carga Horária"
                font_size: 20
                bold: True
                background_color: 0.2, 0.6, 0.8, 1  # Azul claro
                background_normal: ''
                color: 1, 1, 1, 1
                size_hint: (0.7, 1)
                on_press: root.calcular_ch()

        Label:
            id: resultado_label
            text: "Carga Horária: "
            font_size: 20
            bold: True
            color: 0, 0.8, 0, 1  # Verde mais vibrante
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None

        BoxLayout:
            size_hint_y: None
            height: 80
            padding: [50, 0]

            Button:
                text: "Menu Principal"
                font_size: 20
                bold: True
                background_color: 0.8, 0.2, 0.2, 1  # Vermelho
                background_normal: ''
                color: 1, 1, 1, 1
                size_hint: (0.7, 1)
                on_release: app.root.current = 'menu'

<Ciclo>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # Padding equilibrado para estética
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos

        Label: 
            text: "Matérias Adicionadas"
            font_size: 35
            bold: True
            color: 1, 1, 1, 1  # Texto branco
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None

        Label:
            text: "Para cada Checkbox, você estudará a matéria por 1 hora estudada. Você terá a liberdade de definir o tempo de estudo de cada matéria a medida que for estudando no seu dia a dia."
            font_size: 18
            italic: True
            color: 0.7, 0.7, 0.7, 1  # Cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 10
            text_size: self.width, None

        ScrollView:
            size_hint_y: 1
            GridLayout:
                id: grid_layout
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: 10
                padding: [10, 10]
# Mostrar quantos dias 
        Label:
            id: data_atual
            text: "Dia: --/--/----"
            font_size: 18
            italic: True
            color: 0.7, 0.7, 0.7, 1
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 10
            text_size: self.width, None

        Label:
            id: dias_para_reset
            text: "Faltam -- dias para resetar o ciclo!"
            font_size: 18
            italic: True
            color: 0.7, 0.7, 0.7, 1
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 10
            text_size: self.width, None
        BoxLayout:
            size_hint_y: None
            height: 60
            spacing: 15
            padding: [50, 0]

            Button:
                text: "Adicionar Matéria"
                font_size: 20
                bold: True
                background_color: 0.2, 0.6, 0.8, 1  # Azul
                background_normal: ''
                color: 1, 1, 1, 1
                size_hint: (0.5, 1)
                on_release: root.manager.current = 'materia'
            
            Button:
                text: 'Voltar'
                font_size: 20
                bold: True
                background_color: 0.8, 0.2, 0.2, 1  # Vermelho
                background_normal: ''
                color: 1, 1, 1, 1
                size_hint: (0.5, 1)
                on_release: app.root.current = 'menu'
