<Gerenciador>:
    Menu:
        name: 'menu'
    InputMateria: 
        name: 'materia'
    TelaHorario:
        name: 'horario'
    Welcome:
        name: 'welcome'
    Ciclo:
        name: 'ciclo'
    TransitionHorario:
        name: 'transicao'

<Welcome>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # [left, top, right, bottom]
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            text: "Bem-vindo ao Ciclo de Estudos"
            font_size: 50
            color: 1, 1, 1, 1  # Texto branco
            halign: 'center'  # Centraliza horizontalmente
            valign: 'middle'  # Centraliza verticalmente
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None  # Permite quebra de linha
        Label:
            text: "Organize seu tempo e estudos de forma eficaz! :)"
            font_size: 20
            color: 0.8, 0.8, 0.8, 1  # Texto cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None
        BoxLayout:
            size_hint_y: None
            height: 80  # Altura fixa para o botão
            padding: [50, 0]  # Deixa o botão mais centralizado horizontalmente
            Button:
                text: "Começar"
                font_size: 25
                background_color: 0.2, 0.6, 0.8, 1  # Azul
                background_normal: ''  # Remove o estilo padrão
                color: 1, 1, 1, 1  # Texto branco
                size_hint: (0.5, 1)  # Botão centralizado e menor
                on_release: app.root.current = 'transicao'
        Label:
            text: 'Toque no botão acima para continuar'
            font_size: 16
            color: 0.7, 0.7, 0.7, 1  # Texto cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None


<TransitionHorario>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # [left, top, right, bottom]
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            text: 'Antes de começar, vamos calcular sua carga horária semanal'
            font_size: 20
            color: 1, 1, 1, 1  # Texto branco
            halign: 'center'  # Centraliza horizontalmente
            valign: 'middle'  # Centraliza verticalmente
            size_hint_y: 1 
            height: self.texture_size[1] + 20  # Ajusta a altura com base no texto
            text_size: self.width, None  # Permite quebra de linha
        BoxLayout:
            size_hint_y: None
            height: 80  # Altura fixa para o botão
            padding: [50, 0]  # Deixa o botão mais centralizado horizontalmente
            Button:
                text: 'Definir Carga Horária'
                font_size: 20
                background_color: 0.2, 0.6, 0.8, 1  # Azul
                background_normal: ''  # Remove o estilo padrão
                color: 1, 1, 1, 1  # Texto branco
                size_hint: (0.5, 1)  # Reduz o tamanho horizontal
                on_release: app.root.current = 'horario'
        Label:
            text: 'Toque no botão acima para continuar'
            font_size: 16
            color: 0.7, 0.7, 0.7, 1  # Texto cinza claro
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: self.texture_size[1] + 20
            text_size: self.width, None

<Menu>:
    BoxLayout:    
        orientation: 'vertical'
        spacing: 20
        padding: [30, 50, 30, 50]  # [left, top, right, bottom]
        canvas.before:
            Color:
                rgba: 0.1, 0.2, 0.3, 1  # Fundo azul escuro
            Rectangle:
                size: self.size
                pos: self.pos
        Label: 
            text: "Ciclo de Estudos"
            font_size: 60
            color: 1, 1, 1, 1  # Texto branco
            bold: True
            size_hint_y: None
            height: 100
        Button:
            text: "Adicionar Matéria"
            font_size: 25
            background_color: 0.2, 0.6, 0.8, 1  # Azul
            background_normal: ''  # Remove imagem padrão
            color: 1, 1, 1, 1  # Texto branco
            size_hint_y: None
            height: 60
            on_release: app.root.current = 'materia'
        Button:
            text: "Ajustar Horário"
            font_size: 25
            background_color: 0.2, 0.6, 0.8, 1
            background_normal: ''
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 60
            on_release: app.root.current = 'horario'
        Button: 
            text: "Ver Ciclo"
            font_size: 25
            background_color: 0.2, 0.6, 0.8, 1
            background_normal: ''
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 60
            on_release: app.root.current = 'ciclo'
        Button:
            text: "Sair"
            font_size: 25
            background_color: 0.8, 0.2, 0.2, 1  # Vermelho
            background_normal: ''
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 60
            on_release: app.stop()

<InputMateria>:
    nome_materia: nome_input
    spinner_diff: dificuldade_spinner

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10

        TextInput:
            id: nome_input
            hint_text: "Nome da Matéria"
            size_hint_y: None
            height: 50

        Spinner:
            id: dificuldade_spinner
            text: "Selecione"
            values: ["1 - Péssimo", "2 - Ruim", "3 - Mediano", "4 - Bom", "5 - Excelente"]
            size_hint_y: None
            height: 50

        BoxLayout:
            Button:
                text: "Salvar"
                size_hint_y: None
                height: 50
                on_release: root.salvar_materia()

            Button:
                text: "Cancelar"
                size_hint_y: None
                height: 50
                on_release: app.root.current = 'menu'

<TelaHorario>:
    dias_input: dias_input
    horas_input: horas_input
    resultado_label: resultado_label

    BoxLayout:
        orientation: 'vertical'
        padding: [20, 30, 20, 30]  # Adiciona padding proporcional (esquerda, topo, direita, base)
        spacing: 15  # Mais espaçamento entre os elementos

        Label:
            text: "Calculadora de Carga Horária"
            font_size: 28
            bold: True
            color: [0.2, 0.6, 0.8, 1]  # Cor em formato RGBA (azul claro)
            size_hint_y: 1
            height: 50

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint_y: None
            height: 40

            # Label:
            #     text: "Dias:"
            #     size_hint_x: 0.4
            #     font_size: 18

            TextInput:
                id: dias_input
                hint_text: "Dias"
                input_filter: "int"
                size_hint_x: 0.6
                background_color: [1, 1, 1, 1]  # Fundo branco
                foreground_color: [0, 0, 0, 1]  # Texto preto

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint_y: None
            height: 40

            # Label:
            #     text: "Horas por Dia:"
            #     size_hint_x: 0.4
            #     font_size: 18

            TextInput:
                id: horas_input
                hint_text: "Horas por Dia"
                input_filter: "int"
                size_hint_x: 0.6
                background_color: [1, 1, 1, 1]
                foreground_color: [0, 0, 0, 1]

        Button:
            text: "Calcular Carga Horária"
            size_hint: (1, None)
            font_size: 18
            bold: True
            background_color: [0.2, 0.6, 0.8, 1]  # Azul claro
            color: [1, 1, 1, 1]  # Texto branco
            on_press: root.calcular_ch()  # Vincula ao método corrigido

        Label:
            id: resultado_label
            text: "Carga Horária: "
            font_size: 20
            bold: True
            color: [0, 0.4, 0, 1]  # Verde escuro
            size_hint_y: None
            height: 40

        Button:
            text: "Menu Principal"
            bold: True
            font_size: 18
            size_hint: (1, None)
            background_color: [1, 0.2, 0.2, 1]  # Vermelho claro
            color: [1, 1, 1, 1]  # Texto branco
            on_release: app.root.current = 'menu'
<Ciclo>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        Label: 
            text: "Matérias Adicionadas"
            font_size: 60
        Label:
            text: "Adicione as matérias que deseja estudar"
            font_size: 20
        ScrollView:
            GridLayout:
                id: grid_layout
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: 10

        BoxLayout:
            size_hint_y: None
            height: 50
            spacing: 10

            Button:
                text: "Adicionar Matéria"
                on_release: root.manager.current = 'materia'

            Button:
                text: 'Voltar'
                on_release: app.root.current = 'menu'
